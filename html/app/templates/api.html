<p><style>
    body {
      margin-top: 2em;
      margin-left: 2em;
      font-family: Consolas, monaco, monospace;
      }
    p {
      color: RoyalBlue;
      font-family: Verdana, Helvetica, sans-serif;
      }
    h1, h2, h3 {
      font-family: Verdana, Helvetica, sans-serif;
    }
    body > ul > li {
        margin-bottom: 2em;
        color: RoyalBlue;
        list-style-type: disc;
    }
    body > ul > li > ul {
        color: black;
    }
    ul {
        list-style-type: circle;
    }
</style></p>

<h1>Sparv API</h1>

<p>Read Sparv's API documentation:
<a href="https://spraakbanken.gu.se/eng/research/infrastructure/sparv/webservice">https://spraakbanken.gu.se/eng/research/infrastructure/sparv/webservice</a></p>

<h2>Available queries</h2>

<ul>
<li><p>/api</p>

<ul>
<li>description: Shows this short API description.</li>
<li>methods: GET</li>
</ul></li>
<li><p>/</p>

<ul>
<li>description: Handles text input and runs the analysis.</li>
<li>methods: GET, POST</li>
<li>params:
<ul>
<li>language, default: sv</li>
<li>mode, default: plain</li>
<li>text, default: ''</li>
<li>settings</li>
<li>incremental, default: False</li>
</ul></li>
</ul></li>
<li><p>/status</p>

<ul>
<li>description: Returns the status of existing builds.</li>
<li>methods: GET</li>
</ul></li>
<li><p>/ping</p>

<ul>
<li>description: Pings the backend, responds with the status of the catapult.</li>
<li>methods: GET</li>
</ul></li>
<li><p>/schema</p>

<ul>
<li>description: Returns the json schema generated from the parameters provided.</li>
<li>methods: GET</li>
<li>params:
<ul>
<li>language, default: sv</li>
<li>mode, default: plain</li>
</ul></li>
</ul></li>
<li><p>/makefile</p>

<ul>
<li>description: Returns the Makefile generated from the parameters provided.</li>
<li>methods: GET, POST</li>
<li>params:
<ul>
<li>language, default: sv</li>
<li>mode, default: plain</li>
<li>settings</li>
<li>incremental, default: False</li>
</ul></li>
</ul></li>
<li><p>/upload</p>

<ul>
<li>description: Handles upload of files and runs the analysis.</li>
<li>methods: GET, POST</li>
<li>params:
<ul>
<li>language, default: sv</li>
<li>mode, default: plain</li>
<li>email, default: ''</li>
<li>files</li>
<li>settings</li>
</ul></li>
</ul></li>
<li><p>/download</p>

<ul>
<li>description:</li>
<li>methods: GET</li>
<li>params:
<ul>
<li>hash, default: ''</li>
</ul></li>
</ul></li>
<li><p>/join</p>

<ul>
<li>description: Joins an existing build.</li>
<li>methods: GET, POST</li>
<li>params:
<ul>
<li>language, default: sv</li>
<li>mode, default: plain</li>
<li>hashnumber, default: ''</li>
<li>incremental, default: False</li>
</ul></li>
</ul></li>
<li><p>/cleanup</p>

<ul>
<li>description: Removes builds that are finished and haven't been accessed within the timeout (7 days).
Requires secret_key parameter in query.</li>
<li>methods: GET</li>
<li>params:
<ul>
<li>secret_key, default: ''</li>
</ul></li>
</ul></li>
<li><p>/cleanup/errors</p>

<ul>
<li>description: Removes builds that are finished and haven't been accessed within the timeout (7 days) and
the builds with status Error. Requires secret_key parameter in query.</li>
<li>methods: GET</li>
<li>params:
<ul>
<li>secret_key, default: ''</li>
</ul></li>
</ul></li>
<li><p>/cleanup/forceall</p>

<ul>
<li>description: Removes all the existing builds. Requires secret_key parameter in query.</li>
<li>methods: GET</li>
<li>params:
<ul>
<li>secret_key, default: ''</li>
</ul></li>
</ul></li>
</ul>

<h2>Example settings</h2>

<p>Swedish plain text input (default mode):
<pre><code>
settings={
    "corpus": "untitled",
    "lang": "sv",
    "textmode": "plain",
    "word_segmenter": "default_tokenizer",
    "sentence_segmentation": {
        "sentence_chunk": "paragraph",
        "sentence_segmenter": "default_tokenizer"
    },
    "paragraph_segmentation": {
        "paragraph_segmenter": "blanklines"
    },
    "positional_attributes": {
        "lexical_attributes": ["pos", "msd", "lemma", "lex", "sense"],
        "compound_attributes": ["complemgram", "compwf"],
        "dependency_attributes": ["ref", "dephead", "deprel"],
        "sentiment": ["sentiment"]
    },
    "named_entity_recognition": [],
    "text_attributes": {
        "readability_metrics": ["lix", "ovix", "nk"]
    }
}
</code></pre></p>

<p>Swedish with xml input:
<pre><code>
settings={
    "corpus": "exempelkorpus",
    "lang": "sv",
    "textmode": "xml",
    "word_segmenter": "default_tokenizer",
    "sentence_segmentation": {
        "tag": "s",
        "attributes": ["number"]
    },
    "paragraph_segmentation": {
        "tag": "p",
        "attributes": ["name"]
    },
    "root": {
        "tag": "text",
        "attributes": ["title"]
    },
    "extra_tags": [
        {
            "tag": "chapter",
            "attributes": ["name"]
        }
    ],
    "positional_attributes": {
        "lexical_attributes": [ "pos", "msd", "lemma", "lex", "sense"],
        "compound_attributes": ["complemgram", "compwf"],
        "dependency_attributes": ["ref", "dephead", "deprel"],
        "sentiment": ["sentiment"]
    },
    "named_entity_recognition": [],
    "text_attributes": {
        "readability_metrics": ["lix", "ovix", "nk"]
    }
}
</code></pre></p>

<p>English:
<pre><code>
settings={
    "corpus": "untitled",
    "lang": "en",
    "textmode": "xml",
    "root": {
        "tag": "text",
        "attributes": []
    },
    "extra_tags": [],
    "positional_attributes": {
        "lexical_attributes": ["pos", "msd", "lemma"]
    },
    "text_attributes": {
        "readability_metrics": ["lix", "ovix", "nk"]
    }
}
</code></pre></p>

<p>Swedish development mode (Sparv labs):
<pre><code>
settings={
    "corpus": "untitled",
    "lang": "sv-dev",
    "textmode": "plain",
    "word_segmenter": "default_tokenizer",
    "sentence_segmentation": {
        "sentence_chunk": "paragraph",
        "sentence_segmenter": "default_tokenizer"
    },
    "paragraph_segmentation": {
        "paragraph_segmenter": "blanklines"
    },
    "positional_attributes": {
        "lexical_attributes": ["pos", "msd", "lemma", "lex", "sense"],
        "compound_attributes": ["complemgram", "compwf"],
        "dependency_attributes": ["ref", "dephead", "deprel"],
        "lexical_classes": ["blingbring", "swefn"],
        "sentiment": ["sentiment"]
    },
    "named_entity_recognition": ["ex", "type", "subtype"],
    "text_attributes": {
        "readability_metrics": ["lix", "ovix","nk"],
        "lexical_classes": ["blingbring", "swefn"]
    }
}
</code></pre></p>
